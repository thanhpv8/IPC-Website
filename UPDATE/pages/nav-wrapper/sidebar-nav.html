<aside class="main-sidebar">

  <!-- sidebar: style can be found in sidebar.less -->
  <section class="sidebar">

    <!-- Sidebar user panel (optional) -->
    <div id="version-container" class="user-panel" style="cursor:pointer;">
      <div class="pull-left" style="color: #fff;padding-left:10px;padding-top:5px;">
        <!-- <img src="../LIBS/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image"> -->
        <i class="fas fa-code-branch fa-lg"></i>
      </div>
      <div class="pull-left info" style="padding-left:0px;">
        <span>VER.</span> <span id="sidebar-user-name"></span>
      </div>
    </div>

    <!-- search form (Optional) -->
    <form class="sidebar-form">
      <div class="input-group">
        <input id="search_info_input" type="text" name="q" class="form-control" placeholder="Search...">
        <span class="input-group-btn">
          <button id="search_info_btn" type="button" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
          </button>
        </span>
      </div>
      <div id="search_info_display"style="display:none; width:208px; position: absolute; background-color: white; z-index: 10; max-height: 200px; overflow:auto; padding:5px;"></div>
    </form>
    <!-- /.search form -->

    <!-- Sidebar Menu -->
    <ul class="sidebar-menu tree" data-widget="tree">
      <li class="header">Navigation</li>

      <!-- Home -->
      <li class="active menu-item" page_id="system-view-page">
        <a href="#">
          <i class="glyphicon glyphicon-home"></i>
          <span>Home</span>
        </a>
      </li>

      <!-- Configuration Menu -->
      <li class="treeview menu-open">
        <a href="#">
          <i class="fa fa-bezier-curve"></i>
          <span>Configuration Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>
        <ul class="treeview-menu" style="display:block;">

          <!-- Setup Wire Center -->
          <li class="menu-item" page_id="wire-center-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Wire Center</span>
            </a>
          </li>
          
          <!-- Setup Facilities -->
          <li class="menu-item" page_id="fac-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Facilities</span>
            </a>
          </li>

          <!-- Setup Port Mapping -->
          <li class="menu-item" page_id="portmap-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Port Mapping</span>
            </a>
          </li>

        </ul>
      </li>

      <!-- Provisioning Menu -->
      <li class="treeview">
        <a href="#">
          <i class="fa fa-phone"></i>
          <span>Provisioning Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>

        <ul class="treeview-menu">

          <!-- Setup Service Connections -->
          <li class="menu-item" page_id="svc-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Service Connection</span>
            </a>
          </li>

          <!-- Setup/Execute Batches -->
          <li class="menu-item" page_id="batch-exec-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Batch Execution</span>
            </a>
          </li>
          
          <!-- Setup Flow-Through Orders -->
          <li class="menu-item" page_id="ftOrders-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>FT Orders</span>
            </a>
          </li>

        </ul>
      </li>

      <!-- Maintenance Menu -->
      <li class="treeview">
        <a href="#">
          <i class="fa fa-tools"></i>
          <span>Maintenance Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>

        <ul class="treeview-menu">
          
          <!-- @TODO -->
          <!-- Setup Maintenance Connections -->
          <li class="menu-item" page_id="setup-maint-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Setup Maintenance</span>
            </a>
          </li>

          <!-- Alarm Administration -->
          <li class="menu-item" page_id="alarm-admin-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Alarm Administration</span>
            </a>
          </li>

          <!-- Path Administration -->
          <li class="menu-item" page_id="path-admin-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Path Administration</span>
            </a>
          </li>

          <!-- Lock/Unlock Matrix Cards and Nodes -->
          <li class="menu-item" page_id="matrix-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Lock/Unlock Cards and Nodes</span>
            </a>
          </li>
          
        </ul>
      </li>

      <!-- User Administration Menu -->
      <li class="treeview">
        <a href="#">
          <i class="fa fa-user-cog"></i>
          <span>User Administration Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>
        <ul class="treeview-menu">
          
          <!-- @TODO -->
          <!-- Setup Users -->
          <li class="menu-item" page_id="setup-users-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Setup Users</span>
            </a>
          </li>
  
          <!-- Broadcast Notifications -->
          <li class="menu-item" page_id="brdcst-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Broadcast Notification</span>
            </a>
          </li>

        </ul>
      </li>

      <!-- IPC Administration Menu -->
      <li class="treeview">
        <a href="#">
          <i class="fas fa-shield-alt"></i>
          <span>IPC Administration Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>
        <ul class="treeview-menu">

          <!-- Node Operation -->
          <li class="menu-item" page_id="node-operation-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Node Operation</span>
            </a>
          </li>

          <!-- IPC References -->
          <li class="menu-item" page_id="references-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>IPC References</span>
            </a>
          </li>

          <li class="menu-item" page_id="ft-release-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>FT Release</span>
            </a>
          </li>
          <li class="menu-item" page_id="ft-modification-page">
              <a href="#">
                <i class="far fa-circle fa-sm"></i>
                <span>FT Modification</span>
              </a>
          </li>

          <li class="menu-item" page_id="helpsearch-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Setup Help/Search</span>
            </a>
          </li>

          <!-- Database Backup -->
          <li class="menu-item" page_id="database-backup-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Database Backup</span>
            </a>
          </li>

          <!-- Event Report -->
          <li class="menu-item" page_id="event-report-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              Event Reports
            </a>
          </li>

          <!-- @TODO -->
          <!-- Software Update -->
          <li class="menu-item" page_id="soft-update-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Software Update</span>
            </a>
          </li>

          <!-- @TODO -->
          <!-- Event Log-->

        </ul>
      </li>

      <!-- Reports Menu -->
      <li class="treeview">
        <a href="#">
          <i class="fa fa-file-invoice"></i>
          <span>Reports Menu</span>
          <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
        </a>
        <ul class="treeview-menu">

          <!-- Alarm Report -->
          <li class="menu-item" page_id="alarmreport-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Alarm Reports</span>
            </a>
          </li>

          <!-- Configuration Report -->
          <li class="menu-item" page_id="config-report-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Configuration Reports</span>
            </a>
          </li>
          
          <!-- Provisioning Report -->
          <li class="menu-item" page_id="prov-report-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Provisioning Reports</span>
            </a>
          </li>

          <!-- Maintenance Report -->
          <li class="menu-item" page_id="maint-report-page">
            <a href="#">
              <i class="far fa-circle fa-sm"></i>
              <span>Maintenance Reports</span>
            </a>
          </li>
        </ul>

      

      

      
    </ul>
    <!-- /.sidebar-menu -->
  </section>
  <!-- /.sidebar -->
</aside>

<script type="text/javascript">
  $('.menu-item').click(function() {
    let pageId = $(this).attr('page_id');

    $('.menu-item').removeClass('active');
    $(this).addClass('active');

    $('.content-page').removeClass('active-page');
    $('#'+pageId).addClass('active-page');
  });

  $('#version-container').click(function() {
    let modal = {
      title: 'Software Information',
      body: '<textarea style="width:100%;" rows="15" readonly>'+swVer.description+'</textarea>',
      size: 'lg'
    }

    modalHandler(modal);
  });

  //---------------Search/help area in side bar---------------//
  $("#search_info_btn").click(function(){
    $('#search_info_display').scrollTop(0)
    let searchValue = $("#search_info_input").val().trim();
    if(searchValue == "") {
      $("#search_info_display").html("")
      $("#search_info_display").hide();
      return;
    }
     
    $.ajax({
      type:'POST',
      url: ipcDispatch,
      data: {
        "api": "ipcSearch",
        "act": "search",
        "user": user.uname,
        "item": searchValue.toUpperCase()
      },
      dataType: 'json'

    }).done(function(data) {
      if(data.rslt == 'fail') {
        $("#search_info_display").show()
        $("#search_info_display").html('<font color="red">'+data.reason.toUpperCase()+'</font>')
      }
      else {
        let res = data.rows;
        let a = "";
        for(let i=0; i<res.length; i++) {
          a += `<strong>${res[i].item}</strong>:${res[i].descr}<hr>`
        }
        if(a != "") {
          $("#search_info_display").show()
          $("#search_info_display").html(a)
        }
        else {
          $("#search_info_display").html("")
          $("#search_info_display").hide();
        }
        
      }
    });
  })
  
  $('#search_info_input').keypress(function(e){
    if(e.which == 13)
    {
      $("#search_info_btn").trigger('click');
      return false;
    }
});
  $('body').click(function(e){    
    if(e.target.id == "search_info_display" || $(e.target).closest('#menu_content').length)
        return;
    $("#search_info_display").html("");
    $("#search_info_display").hide();

  });

</script>