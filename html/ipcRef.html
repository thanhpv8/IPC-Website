<div id="ref" class="tab-pane fade in" style="position: relative;">
    
    <!-- Handles Title of page -->
    <div class="col-sm-12">
        <div class="col-sm-12">
            <h2>IPC REFERENCES</h2>
        </div>  
    </div>
    <!-- end of header -->

    <div class="col-sm-12">
            <div class="col-sm-2">
                <form>
                    <div class="form-group">
                        <label for="ref_pwExpire_sel">MAXIMUM PASSWORD AGE:</label>
                        <select id="ref_pwExpire_sel" class="form-control">
                            
                            <option value="0">NEVER EXPIRES</option>
                            <option value="30">EXPIRES IN 30 DAYS</option>
                            <option value="60">EXPIRES IN 60 DAYS</option>
                            <option value="90">EXPIRES IN 90 DAYS</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_pwAlert_sel">PASSWORD EXPIRY PROMPT:</label>
                        <select id="ref_pwAlert_sel" class="form-control">
                            
                            <option value="0">NEVER PROMPT</option>
                            <option value="3">PROMPT BEFORE 3 DAYS</option>
                            <option value="5">PROMPT BEFORE 5 DAYS</option>
                            <option value="7">PROMPT BEFORE 7 DAYS</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_pwReuse_sel">PASSWORD REUSE:</label>
                        <select id="ref_pwReuse_sel" class="form-control">
                            <option value=""></option>
                            <option value="2">NO REUSE LAST 2 PW</option>
                            <option value="3">NO REUSE LAST 3 PW</option>
                            <option value="4">NO REUSE LAST 4 PW</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_pwRepeat_sel">PW_REPEAT:</label>
                        <select id="ref_pwRepeat_sel" class="form-control">
                            
                            <option>0</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_brdcstDel_sel">BRDCST_DEL:</label>
                        <select id="ref_brdcstDel_sel" class="form-control">
                            
                            <option value="10">10 Days</option>
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_userDisable_sel">USER_DISABLE</label>
                        <select id="ref_userDisable_sel" class="form-control">
                            
                            <option value="20">20 Days</option>
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_userIdleTo_sel">USER_IDLE_TO:</label>
                        <select id="ref_userIdleTo_sel" class="form-control">
                            <option value="15">15 Minutes</option>
                            <option value="30">30 Minutes</option>
                            <option value="45">45 Minutes</option>
                            <option value="60">60 Minutes</option>
                        </select>
                    </div>
                </form>
            </div>

            <div class="col-sm-2">
                <form>
                    <div class="form-group">
                        <label for="ref_almArchv_sel">ALM_ARCHV:</label>
                        <select id="ref_almArchv_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_almDel_sel">ALM_DEL:</label>
                        <select id="ref_almDel_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_cfgArchv_sel">CFG_ARCHV:</label>
                        <select id="ref_cfgArchv_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_cfgDel_sel">CFG_DEL:</label>
                        <select id="ref_cfgDel_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_provArchv_sel">PROV_ARCHV:</label>
                        <select id="ref_provArchv_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_provDel_sel">PROV_DEL:</label>
                        <select id="ref_provDel_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_maintArchv_sel">MAINT_ARCHV:</label>
                        <select id="ref_maintArchv_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
            </div>

            <div class="col-sm-2">
                <form>
                    <div class="form-group">
                        <label for="ref_maintDel_sel">MAINT_DEL:</label>
                        <select id="ref_maintDel_sel" class="form-control">
                            
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30">1 Month</option>
                            <option value="90">3 Months</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_autoCkid_sel">AUTO_CKID:</label>
                        <select id="ref_autoCkid_sel" class="form-control">
                            
                            <option value="Y">Y</option>
                            <option value="N">N</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_autoOrdno_sel">AUTO_ORDNO:</label>
                        <select id="ref_autoOrdno_sel" class="form-control">
                            
                            <option value="Y">Y</option>
                            <option value="N">N</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_dateFormat_sel">DATE_FORMAT:</label>
                        <select id="ref_dateFormat_sel" class="form-control">
                            
                            <option>YYYY-MM-DD</option>
                            <option>MM-DD-YYYY</option>
                            <option>MM-DD-YY</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="ref_mtcRestore_sel">MTC_RESTORE</label>
                        <select id="ref_mtcRestore_sel" class="form-control">
                            
                            <option value="3">3 Minutes</option>
                            <option value="5">5 Minutes</option>
                            <option value="10">10 Minutes</option>
                            <option value="15">15 Minutes</option>
                        </select>
                    </div>
                </form>
            </div>
    </div>

<!--------------------------------------------------------------------------------------------->

        

    <!-- ACTION SELECT AREA -->

    <div class="col-sm-12">
        <div class="col-sm-2">
            <label for="ref_action_sel">ACTION:</label>
            <select id="ref_action_sel" class="form-control">
                <option></option>
                <option>UPDATE</option>
                <option>RESET</option>
            </select>
        </div>
            
        <div class="col-sm-10">
            <button id="ref_submit_btn" style="text-align:right;" class="btn btn-primary">SUBMIT</button>
            <button id="ref_cancel_btn" style="text-align:right" class="btn btn-primary">CANCEL</button>
            <button id="ref_refresh_btn" style="text-align:right" class="btn btn-primary">REFRESH</button>
        </div>
        
    </div>


</div>


<script>
var ref = {
    page:           $("#ref"),
    pwexpire:       $("#ref_pwExpire_sel"),
    pwalert:        $("#ref_pwAlert_sel"),
    pwreuse:        $("#ref_pwReuse_sel"),
    pwrepeat:       $("#ref_pwRepeat_sel"),
    brdcstdel:      $("#ref_brdcstDel_sel"),
    userdisable:    $("#ref_userDisable_sel"),
    useridleto:     $("#ref_userIdleTo_sel"),
    almarchv:       $("#ref_almArchv_sel"),
    almdel:         $("#ref_almDel_sel"),
    cfgarchv:       $("#ref_cfgArchv_sel"),
    cfgdel:         $("#ref_cfgDel_sel"),
    provarchv:      $("#ref_provArchv_sel"),
    provdel:        $("#ref_provDel_sel"),
    maintarchv:     $("#ref_maintArchv_sel"),
    maintdel:       $("#ref_maintDel_sel"),
    autockid:       $("#ref_autoCkid_sel"),
    autoordno:      $("#ref_autoOrdno_sel"),
    dateformat:     $("#ref_dateFormat_sel"),
    mtcrestore:     $("#ref_mtcRestore_sel"),
    action:         $("#ref_action_sel"),
    submitBtn:      $("#ref_submit_btn"),
    cancelBtn:      $("#ref_cancel_btn"),
    refreshBtn:     $("#ref_refresh_btn"),
    
    tblRows:        [],



    start: function() {
            // ref.clearForm();
        ref.query('query');
        // rack.start();
    },
    
    clearForm: function() {
        ref.displayForm();
    },

    displayForm: function() {
        ref.pwexpire    .val(ref.tblRows[0].pw_expire);
        ref.pwalert     .val(ref.tblRows[0].pw_alert);
        ref.pwreuse     .val(ref.tblRows[0].pw_reuse);
        ref.pwrepeat    .val(ref.tblRows[0].pw_repeat);
        ref.brdcstdel   .val(ref.tblRows[0].brdcst_del);
        ref.userdisable .val(ref.tblRows[0].user_disable);
        ref.useridleto  .val(ref.tblRows[0].user_idle_to);
        ref.almarchv    .val(ref.tblRows[0].alm_archv);
        ref.almdel      .val(ref.tblRows[0].alm_del);
        ref.cfgarchv    .val(ref.tblRows[0].cfg_archv);
        ref.cfgdel      .val(ref.tblRows[0].cfg_del);
        ref.provarchv   .val(ref.tblRows[0].prov_archv);
        ref.provdel     .val(ref.tblRows[0].prov_del);
        ref.maintarchv  .val(ref.tblRows[0].maint_archv);
        ref.maintdel    .val(ref.tblRows[0].maint_del);
        ref.autockid    .val(ref.tblRows[0].auto_ckid);
        ref.autoordno   .val(ref.tblRows[0].auto_ordno);
        ref.dateformat  .val(ref.tblRows[0].date_format);
        ref.mtcrestore  .val(ref.tblRows[0].mtc_restore);
    },

    query: function(action) {

        $.post(ipcDispatch,
        {
            api:            "ipcRef",
            action:         action,
            user:           $("#main_currentUser").text(),
            pw_expire:      ref.pwexpire.val(),
            pw_alert:       ref.pwalert.val(),
            pw_reuse:       ref.pwreuse.val(),
            pw_repeat:      ref.pwrepeat.val(),
            brdcst_del:     ref.brdcstdel.val(),
            user_disable:   ref.userdisable.val(),
            user_idle_to:   ref.useridleto.val(),
            alm_archv:      ref.almarchv.val(),
            alm_del:        ref.almdel.val(),
            cfg_archv:      ref.cfgarchv.val(),
            cfg_del:        ref.cfgdel.val(),
            prov_archv:     ref.provarchv.val(),
            prov_del:       ref.provdel.val(),
            maint_archv:    ref.maintarchv.val(),
            maint_del:      ref.maintdel.val(),
            auto_ckid:      ref.autockid.val(),
            auto_ordno:     ref.autoordno.val(),
            date_format:    ref.dateformat.val(),
            mtc_restore:    ref.mtcrestore.val(),
        },
        function (data, status) {
            var obj = JSON.parse(data);
            if (obj.rslt == "fail") {
                alert(obj.reason);
            }
            else {
                if (obj.rows.length === 0) {
                    if (action != "query") {
                        alert("No Record Found");
                        return;
                    }
                }
                else {
                    ref.tblRows = obj.rows;
                    ref.displayForm();
                    if (action != "query") {
                        alert(action + " - Success");
                    }
                }
            }
        });
    },

}


// EVENTS HANDLING



ref.submitBtn.click( function() {
    if (ref.action.val() == "") {
        alert("Please select an action!");
    }
    if (ref.action.val() == "UPDATE") {
        confirm("Are you sure you want to update the options with the new selections?", false, function(){
            ref.query('update');
            ref.action.val("");
        });
    }
    if (ref.action.val() == "RESET") {
        confirm("Are you sure you want to reset options to the default?", false, function(){
            ref.query('reset');
            ref.action.val("");
        });         
    }
})

ref.cancelBtn.click( function() {
    ref.displayForm();
})

ref.refreshBtn.click(function() {
    //ref.query('query');
    ref.start();
})

</script>